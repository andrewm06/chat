generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  USER
  ADMIN
}

enum AppointmentStatus {
  SCHEDULED
  COMPLETED
  CANCELLED
}

model User {
  id           String        @id @default(cuid())
  name         String?
  email        String        @unique
  role         Role          @default(USER)
  quotes       Quote[]
  appointments Appointment[]
  createdAt    DateTime      @default(now())
}

model Quote {
  id            String        @id @default(cuid())
  address       String
  windowCount   Int
  price         Int
  createdAt     DateTime      @default(now())
  user          User?         @relation(fields: [userId], references: [id])
  userId        String?
  appointment   Appointment?
}

model Appointment {
  id             String             @id @default(cuid())
  scheduledDate  DateTime
  status         AppointmentStatus  @default(SCHEDULED)
  createdAt      DateTime           @default(now())
  quote          Quote              @relation(fields: [quoteId], references: [id])
  quoteId        String             @unique
  user           User?              @relation(fields: [userId], references: [id])
  userId         String?
}
